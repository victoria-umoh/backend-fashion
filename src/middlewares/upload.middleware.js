import express from 'express';
import upload from '../middleware/upload.middleware.js'; // The code you just wrote
import { protect, authorize } from '../middleware/auth.middleware.js';

const router = express.Router();

// This route receives the file from the Add Product screen
router.post('/', protect, authorize('admin'), upload.single('image'), (req, res) => {
  // 'req.file.path' is the dynamic URL generated by Cloudinary
  res.send(req.file.path); 
});

export default router;